import{d as $,f as q,r as C,b as P,h as u,i as U,n as F,w as o,k as a,m as B,t as E,E as R,_ as M}from"./index.66cc4c36.js";import{C as j}from"./common.b6c75224.js";import{s as N}from"./user.f1b2b1fb.js";import{E as S}from"./index.187d93a7.js";const V=$({__name:"registerForm",props:{isManager:{type:Boolean,required:!0,default:!1}},setup(f,{expose:v}){const{t:l}=q(),g=f,b={labelCol:{span:6},wrapperCol:{span:18}},r=C({username:"",password:"",confirm_password:"",email:"",real_name:"",department:"",is_mfa:0,mfa_code:0,mfa_secret:""}),{regExpPassword:_}=j();let c=async(t,e)=>/^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).*$/.test(e)?e!==r.password&&e!==""?Promise.reject(l("user.form.valid.valid")):Promise.resolve():Promise.reject(l("user.form.valid.password"));const w={username:[{trigger:"blur",message:l("user.form.valid.user"),required:!0}],password:[{validator:_,trigger:"blur",required:!0}],confirm_password:[{trigger:"blur",message:l("user.form.valid.confirm"),required:!0},{required:!0,validator:c,trigger:"blur"}],real_name:[{trigger:"blur",message:l("user.form.valid.real_name"),required:!0}],department:[{trigger:"blur",message:l("user.form.valid.dept"),required:!0}],email:[{type:"email",message:l("user.form.valid.email"),trigger:"blur",required:!0}]},i=P(),d=()=>i.value.validate().then(async()=>{await N(r,g.isManager),p(),S.emit("closeState")}),p=()=>{i.value.resetFields()};return v({registered:d,resetFields:p}),(t,e)=>{const n=u("a-input"),m=u("a-form-item"),k=u("a-button"),y=u("a-form");return U(),F(y,R({ref_key:"formRef",ref:i,model:r,rules:w},b),{default:o(()=>[a(m,{label:t.$t("user.form.user"),name:"username","has-feedback":""},{default:o(()=>[a(n,{value:r.username,"onUpdate:value":e[0]||(e[0]=s=>r.username=s)},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("user.form.password"),name:"password","has-feedback":""},{default:o(()=>[a(n,{value:r.password,"onUpdate:value":e[1]||(e[1]=s=>r.password=s),type:"password"},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("user.form.confirm"),name:"confirm_password","has-feedback":""},{default:o(()=>[a(n,{value:r.confirm_password,"onUpdate:value":e[2]||(e[2]=s=>r.confirm_password=s),type:"password"},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("user.form.real_name"),name:"real_name","has-feedback":""},{default:o(()=>[a(n,{value:r.real_name,"onUpdate:value":e[3]||(e[3]=s=>r.real_name=s)},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("user.form.dept"),name:"department","has-feedback":""},{default:o(()=>[a(n,{value:r.department,"onUpdate:value":e[4]||(e[4]=s=>r.department=s)},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("user.form.email"),name:"email","has-feedback":""},{default:o(()=>[a(n,{value:r.email,"onUpdate:value":e[5]||(e[5]=s=>r.email=s)},null,8,["value"])]),_:1},8,["label"]),a(m,{label:t.$t("common.action")},{default:o(()=>[a(k,{type:"primary",onClick:d},{default:o(()=>[B(E(t.$t("user.form.title")),1)]),_:1})]),_:1},8,["label"])]),_:1},16,["model"])}}}),I=M(V,[["__file","F:/inf/Yearning/gemini-next/src/components/user/registerForm.vue"]]);export{I as R};
