import{D as j,d as F,f as q,b as d,h as a,i,j as P,k as t,w as l,m as U,t as B,F as K,n as f,p as b,y as w,_ as V,o as Y,l as A,A as G}from"./index.66cc4c36.js";import{a as J,u as Q,b as X,g as Z,c as ee}from"./rules.1b4fb08a.js";import{C as te}from"./common.b6c75224.js";import{a as ae}from"./index.d3546514.js";const{t:e}=j.global,z=[{name:"DDLCheckTableComment",desc:e("DDLCheckTableComment"),type:"DDL",tp:0},{name:"DDlCheckColumnComment",desc:e("DDlCheckColumnComment"),type:"DDL",tp:0},{name:"DDLCheckColumnNullable",desc:e("DDLCheckColumnNullable"),type:"DDL",tp:0},{name:"DDLCheckColumnDefault",desc:e("DDLCheckColumnDefault"),type:"DDL",tp:0},{name:"DDLCheckFloatDouble",desc:e("DDLCheckFloatDouble"),type:"DDL",tp:0},{name:"DDLEnableAutoincrementInit",desc:e("DDLEnableAutoincrementInit"),type:"DDL",tp:0},{name:"DDLEnablePrimaryKey",desc:e("DDLEnablePrimaryKey"),type:"DDL",tp:0},{name:"DDLPrimaryKeyMust",desc:e("DDLPrimaryKeyMust"),type:"DDL",tp:0},{name:"DDLEnableAutoIncrement",desc:e("DDLEnableAutoIncrement"),type:"DDL",tp:0},{name:"DDLEnableAutoincrementUnsigned",desc:e("DDLEnableAutoincrementUnsigned"),type:"DDL",tp:0},{name:"DDLIndexNameSpec",desc:e("DDLIndexNameSpec"),type:"DDL",tp:0},{name:"CheckIdentifier",desc:e("CheckIdentifier"),type:"DDL",tp:0},{name:"DDLEnableAcrossDBRename",desc:e("DDLEnableAcrossDBRename"),type:"DDL",tp:0},{name:"DDLEnableDropTable",desc:e("DDLEnableDropTable"),type:"DDL",tp:0},{name:"DDLEnableDropDatabase",desc:e("DDLEnableDropDatabase"),type:"DDL",tp:0},{name:"DDLAllowPRINotInt",desc:e("DDLAllowPRINotInt"),type:"DDL",tp:0},{name:"DDLEnableNullIndexName",desc:e("DDLEnableNullIndexName"),type:"DDL",tp:0},{name:"DDLMultiToCommit",desc:e("DDLMultiToCommit"),type:"DDL",tp:0},{name:"DDLAllowMultiAlter",desc:e("DDLAllowMultiAlter"),type:"DDL",tp:0},{name:"DDLAllowColumnType",desc:e("DDLAllowColumnType"),type:"DDL",tp:0},{name:"DDLAllowChangeColumnPosition",desc:e("DDLAllowChangeColumnPosition"),type:"DDL",tp:0},{name:"AllowCreateView",desc:e("AllowCreateView"),type:"DDL",tp:0},{name:"AllowCreatePartition",desc:e("AllowCreatePartition"),type:"DDL",tp:0},{name:"AllowSpecialType",desc:e("AllowSpecialType"),type:"DDL",tp:0},{name:"SupportCollation",desc:e("SupportCollation"),type:"DDL",tp:2},{name:"SupportCharset",desc:e("SupportCharset"),type:"DDL",tp:2},{name:"MustHaveColumns",desc:e("MustHaveColumns"),type:"DDL",tp:2},{name:"DDLMaxKeyParts",desc:e("DDLMaxKeyParts"),type:"DDL",tp:1},{name:"DDLMaxKey",desc:e("DDLMaxKey"),type:"DDL",tp:1},{name:"MaxDDLAffectRows",desc:e("MaxDDLAffectRows"),type:"DDL",tp:1},{name:"DDLMaxCharLength",desc:e("DDLMaxCharLength"),type:"DDL",tp:1},{name:"MaxTableNameLen",desc:e("MaxTableNameLen"),type:"DDL",tp:1},{name:"DMLMaxInsertRows",desc:e("DMLMaxInsertRows"),type:"DML",tp:1},{name:"DMLAllowLimitSTMT",desc:e("DMLAllowLimitSTMT"),type:"DML",tp:0},{name:"DMLAllowInsertNull",desc:e("DMLAllowInsertNull"),type:"DML",tp:0},{name:"DDLImplicitTypeConversion",desc:e("DDLImplicitTypeConversion"),type:"DML",tp:0},{name:"DMLInsertColumns",desc:e("DMLInsertColumns"),type:"DML",tp:0},{name:"DMLWhere",desc:e("DMLWhere"),type:"DML",tp:0},{name:"DMLOrder",desc:e("DMLOrder"),type:"DML",tp:0},{name:"DMLSelect",desc:e("DMLSelect"),type:"DML",tp:0},{name:"MaxAffectRows",desc:e("MaxAffectRows"),type:"DML",tp:1},{name:"DMLTransaction",desc:e("DMLTransaction"),type:"DML",tp:0},{name:"IsOSC",desc:e("IsOSC"),type:"Online-DDL",tp:0},{name:"OscSize",desc:e("OscSize"),type:"Online-DDL",tp:1},{name:"OSCExpr",desc:e("OSCExpr"),type:"Online-DDL",tp:3}],ne=w("br",null,null,-1),le=F({__name:"rules",props:{global:{type:Boolean,required:!1},desc:{type:String,required:!0},isAdd:{type:Boolean,required:!1}},emits:["ok"],setup(I,{expose:D,emit:p}){const r=I,{t:u}=q(),L=p,v=[{title:u("common.table.name"),dataIndex:"name",width:50},{title:u("common.table.type"),dataIndex:"type",width:50},{title:u("common.desc"),dataIndex:"desc"},{title:u("common.action"),dataIndex:"action",width:300}],n=d({}),C=d(z),k=d(0),y=s=>{C.value=z.filter(o=>o.desc.indexOf(s)!==-1)},S=(s,o)=>{n.value=s,k.value=o},x=async()=>{r.isAdd?await J({desc:r.desc,audit_role:n.value}):r.global?await Q(n.value):await X({desc:r.desc,audit_role:n.value,id:k.value}),L("ok")};return D({onRules:S}),(s,o)=>{const T=a("a-input-search"),h=a("a-col"),g=a("a-button"),E=a("a-row"),N=a("a-switch"),R=a("a-input-number"),$=a("a-input"),O=a("a-textarea"),m=a("a-table"),M=a("a-back-top");return i(),P(K,null,[t(E,null,{default:l(()=>[t(h,{span:19},{default:l(()=>[t(T,{placeholder:"input search text","enter-button":"",onSearch:y})]),_:1}),t(h,{span:4,offset:"1"},{default:l(()=>[t(g,{type:"primary",onClick:x},{default:l(()=>[U(B(s.$t("common.save")),1)]),_:1})]),_:1})]),_:1}),ne,t(m,{bordered:"",columns:v,"data-source":C.value,pagination:!1},{bodyCell:l(({column:W,record:c})=>[W.dataIndex==="action"?(i(),P(K,{key:0},[c.tp===0?(i(),f(N,{key:0,checked:n.value[c.name],"onUpdate:checked":_=>n.value[c.name]=_},null,8,["checked","onUpdate:checked"])):b("v-if",!0),c.tp===1?(i(),f(R,{key:1,value:n.value[c.name],"onUpdate:value":_=>n.value[c.name]=_},null,8,["value","onUpdate:value"])):b("v-if",!0),c.tp===2?(i(),f($,{key:2,value:n.value[c.name],"onUpdate:value":_=>n.value[c.name]=_},null,8,["value","onUpdate:value"])):b("v-if",!0),c.tp===3?(i(),f(O,{key:3,value:n.value[c.name],"onUpdate:value":_=>n.value[c.name]=_,rows:6},null,8,["value","onUpdate:value"])):b("v-if",!0)],64)):b("v-if",!0)]),_:1},8,["data-source"]),t(M)],64)}}}),H=V(le,[["__file","F:/inf/Yearning/gemini-next/src/views/manager/rules/rules.vue"]]),oe=w("br",null,null,-1),se=w("br",null,null,-1),ce=w("br",null,null,-1),pe=F({__name:"custom",setup(I){const{is_open:D,turnState:p}=te(),r=d(),u=d(!1),L=d(),{width:v}=ae(r),n=d(""),{t:C}=q(),k=[{title:C("common.table.name"),dataIndex:"desc"},{title:C("common.action"),dataIndex:"action",slotName:"action"}],y=d([]),S=s=>{y.value=y.value.filter(o=>o.desc.indexOf(s)!==-1)},x=async()=>{const{data:s}=await Z();y.value=s.payload};return Y(async()=>{x()}),(s,o)=>{const T=a("a-input-search"),h=a("a-col"),g=a("a-button"),E=a("a-row"),N=a("a-table"),R=a("a-card"),$=a("a-input"),O=a("a-drawer");return i(),P(K,null,[t(R,{ref_key:"card",ref:r},{default:l(()=>[t(E,null,{default:l(()=>[t(h,{span:19},{default:l(()=>[t(T,{placeholder:"input search text","enter-button":"",onSearch:S})]),_:1}),t(h,{span:4,offset:"1"},{default:l(()=>[t(g,{type:"primary",onClick:o[0]||(o[0]=m=>{D.value=!0,u.value=!0})},{default:l(()=>[U(B(s.$t("common.add")),1)]),_:1})]),_:1})]),_:1}),oe,t(N,{bordered:"",columns:k,"data-source":y.value},{bodyCell:l(({column:m,record:M})=>[m.dataIndex==="action"?(i(),f(g,{key:0,size:"small",onClick:()=>{L.value.onRules(M.audit_role,M.id),n.value=M.desc,A(p)()}},{default:l(()=>[U(B(s.$t("common.profile")),1)]),_:2},1032,["onClick"])):b("v-if",!0)]),_:1},8,["data-source"])]),_:1},512),t(O,{visible:A(D),"onUpdate:visible":o[3]||(o[3]=m=>G(D)?D.value=m:null),"force-render":"",title:s.$t("custom"),placement:"right",width:A(v)},{default:l(()=>[t($,{value:n.value,"onUpdate:value":o[1]||(o[1]=m=>n.value=m),placeholder:s.$t("common.table.name")},null,8,["value","placeholder"]),se,ce,t(H,{ref_key:"r",ref:L,desc:n.value,"is-add":u.value,onOk:o[2]||(o[2]=m=>{A(p)(),x()})},null,8,["desc","is-add"])]),_:1},8,["visible","title","width"])],64)}}}),ue=V(pe,[["__file","F:/inf/Yearning/gemini-next/src/views/manager/rules/custom.vue"]]),De=w("br",null,null,-1),me=F({__name:"index",setup(I){const D=d();return Y(async()=>{const{data:p}=await ee();D.value.onRules(p.payload)}),(p,r)=>{const u=a("a-tab-pane"),L=a("a-tabs"),v=a("a-page-header");return i(),f(v,{title:p.$t("common.rule"),"sub-title":p.$t("common.rule.sub"),ghost:!1},{footer:l(()=>[t(L,null,{default:l(()=>[t(u,{key:"all",tab:p.$t("global")},{default:l(()=>[De,t(H,{ref_key:"global",ref:D,desc:"",global:""},null,512)]),_:1},8,["tab"]),t(u,{key:"refer",tab:p.$t("custom_list")},{default:l(()=>[t(ue)]),_:1},8,["tab"])]),_:1})]),_:1},8,["title","sub-title"])}}}),Le=V(me,[["__file","F:/inf/Yearning/gemini-next/src/views/manager/rules/index.vue"]]);export{Le as default};
