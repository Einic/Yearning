import{k as e,G as ee,J as S,K as Y,d as le,f as ae,b as te,C as U,o as ne,h as u,i as H,j as I,w as t,m as r,t as d,ar as C,as as O,l as v,p as se,y as c,F as N,B as oe,n as ue,_ as re}from"./index.66cc4c36.js";import{P as de}from"./pageHeader.9328b4bb.js";import{C as ie}from"./common.b6c75224.js";var pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"};const ve=pe;function R(i){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?Object(arguments[p]):{},f=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(m).filter(function(l){return Object.getOwnPropertyDescriptor(m,l).enumerable}))),f.forEach(function(l){me(i,l,m[l])})}return i}function me(i,p,m){return p in i?Object.defineProperty(i,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):i[p]=m,i}var D=function(p,m){var f=R({},p,m.attrs);return e(ee,R({},f,{icon:ve}),null)};D.displayName="SmileOutlined";D.inheritAttrs=!1;const V=D;function ge(){return S.get(`${Y}/manage/setting`)}function M(i,p){return S.put(`${Y}/manage/setting?test=${i}`,p)}function fe(i){return S.post(`${Y}/manage/setting`,i)}function E(i){return S.delete(`${Y}/manage/setting`,{data:i})}const be=["innerHTML"],$e=c("br",null,null,-1),he=c("br",null,null,-1),ke=["innerHTML"],ce=c("br",null,null,-1),_e=le({__name:"setting",setup(i){const{t:p}=ae({}),m={title:p("setting.title"),subTitle:p("setting.desc")},{layout:f}=ie(),l=te({message:{},ldap:{},other:{limit:0,export:!1}}),F=async()=>{l.value.other.query_expire!==void 0&&await E({date:l.value.other.query_expire.map(s=>s.format("YYYY-MM-DD HH:mm")),tp:!0})},W=async()=>{l.value.other.overdue!==void 0&&await E({date:l.value.other.overdue.map(s=>s.format("YYYY-MM-DD HH:mm")),tp:!1})},P=sessionStorage.getItem("lang")==="en_US"?{"this month":[U().startOf("month"),U().endOf("month")]}:{\u672C\u6708:[U().startOf("month"),U().endOf("month")]},G=()=>{l.value.other.idc.push(l.value.other.force),l.value.other.force=""},J=async()=>{const{data:s}=await ge();l.value=s.payload},Q=s=>{const a=l.value.other.idc.filter($=>$!==s);l.value.other.idc=a};return ne(()=>{J()}),(s,a)=>{const $=u("a-divider"),g=u("a-input"),o=u("a-form-item"),h=u("a-input-password"),T=u("a-checkbox"),q=u("a-input-number"),k=u("a-switch"),b=u("a-button"),_=u("a-space"),y=u("a-form"),w=u("a-col"),X=u("a-textarea"),A=u("a-alert"),B=u("a-row"),Z=u("a-tag"),L=u("a-radio"),K=u("a-radio-group"),j=u("a-range-picker"),z=u("a-popconfirm"),x=u("a-card");return H(),I(N,null,[e(de,{title:m.title,"sub-title":m.subTitle},null,8,["title","sub-title"]),e(x,null,{default:t(()=>[e(B,null,{default:t(()=>[e(w,{span:10},{default:t(()=>[e($,{orientation:"left"},{default:t(()=>[r(d(s.$t("setting.message.push")),1)]),_:1}),e(y,C(O(v(f))),{default:t(()=>[e(o,{label:s.$t("setting.message.hook.addr")},{default:t(()=>[se('            <a-input v-model:value="config.message.web_hook"></a-input>'),e(g,{value:l.value.message.web_hook,"onUpdate:value":a[0]||(a[0]=n=>l.value.message.web_hook=n),placeholder:"WeChat pushing, fill in 'http://netddr(disloopback):9000'"},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.hook.key")},{default:t(()=>[e(h,{value:l.value.message.key,"onUpdate:value":a[1]||(a[1]=n=>l.value.message.key=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.chathook.addr")},{default:t(()=>[e(g,{value:l.value.message.chat_hook,"onUpdate:value":a[2]||(a[2]=n=>l.value.message.chat_hook=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.chathook.key")},{default:t(()=>[e(h,{value:l.value.message.chat_key,"onUpdate:value":a[3]||(a[3]=n=>l.value.message.chat_key=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp")},{default:t(()=>[e(g,{value:l.value.message.host,"onUpdate:value":a[4]||(a[4]=n=>l.value.message.host=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp.enabled")},{default:t(()=>[e(T,{checked:l.value.message.ssl,"onUpdate:checked":a[5]||(a[5]=n=>l.value.message.ssl=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp.port")},{default:t(()=>[e(q,{value:l.value.message.port,"onUpdate:value":a[6]||(a[6]=n=>l.value.message.port=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp.user")},{default:t(()=>[e(g,{value:l.value.message.user,"onUpdate:value":a[7]||(a[7]=n=>l.value.message.user=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp.password")},{default:t(()=>[e(h,{value:l.value.message.password,"onUpdate:value":a[8]||(a[8]=n=>l.value.message.password=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.smtp.test")},{default:t(()=>[e(g,{value:l.value.message.to_user,"onUpdate:value":a[9]||(a[9]=n=>l.value.message.to_user=n)},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.mail.switch")},{default:t(()=>[e(k,{checked:l.value.message.mail,"onUpdate:checked":a[10]||(a[10]=n=>l.value.message.mail=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.hook.switch")},{default:t(()=>[e(k,{checked:l.value.message.ding,"onUpdate:checked":a[11]||(a[11]=n=>l.value.message.ding=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.message.chathook.switch")},{default:t(()=>[e(k,{checked:l.value.message.wechat,"onUpdate:checked":a[12]||(a[12]=n=>l.value.message.wechat=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("common.action")},{default:t(()=>[e(_,null,{default:t(()=>[e(b,{type:"primary",onClick:a[13]||(a[13]=n=>v(M)("wechat",l.value))},{default:t(()=>[r(d(s.$t("setting.message.action.chathook")),1)]),_:1}),e(b,{ghost:"",onClick:a[14]||(a[14]=n=>v(M)("ding",l.value))},{default:t(()=>[r(d(s.$t("setting.message.action.hook")),1)]),_:1}),e(b,{ghost:"",onClick:a[15]||(a[15]=n=>v(M)("mail",l.value))},{default:t(()=>[r(d(s.$t("setting.message.action.mail")),1)]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},16)]),_:1}),e(w,{span:11,offset:"1"},{default:t(()=>[e($,{orientation:"left"},{default:t(()=>[r(d(s.$t("setting.ldap")),1)]),_:1}),e(y,C(O(v(f))),{default:t(()=>[e(o,{label:s.$t("setting.ldap.url")},{default:t(()=>[e(g,{value:l.value.ldap.url,"onUpdate:value":a[16]||(a[16]=n=>l.value.ldap.url=n),placeholder:s.$t("setting.ldap.url.tips")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.ssl")},{default:t(()=>[e(T,{checked:l.value.ldap.ldaps,"onUpdate:checked":a[17]||(a[17]=n=>l.value.ldap.ldaps=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.dn")},{default:t(()=>[e(g,{value:l.value.ldap.user,"onUpdate:value":a[18]||(a[18]=n=>l.value.ldap.user=n),placeholder:s.$t("setting.ldap.dn.tips")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.password")},{default:t(()=>[e(h,{value:l.value.ldap.password,"onUpdate:value":a[19]||(a[19]=n=>l.value.ldap.password=n),placeholder:s.$t("setting.ldap.password.tips")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.filter")},{default:t(()=>[e(g,{value:l.value.ldap.type,"onUpdate:value":a[20]||(a[20]=n=>l.value.ldap.type=n),placeholder:s.$t("setting.ldap.filter.tips")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.sc")},{default:t(()=>[e(g,{value:l.value.ldap.sc,"onUpdate:value":a[21]||(a[21]=n=>l.value.ldap.sc=n),placeholder:"LDAP Search Base"},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.map")},{default:t(()=>[e(X,{value:l.value.ldap.map,"onUpdate:value":a[22]||(a[22]=n=>l.value.ldap.map=n),rows:5,"allow-clear":"",placeholder:s.$t("setting.ldap.map.tips")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.test.user")},{default:t(()=>[e(g,{value:l.value.ldap.test_user,"onUpdate:value":a[23]||(a[23]=n=>l.value.ldap.test_user=n),placeholder:"LDAP Test User"},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.ldap.test.password")},{default:t(()=>[e(h,{value:l.value.ldap.test_password,"onUpdate:value":a[24]||(a[24]=n=>l.value.ldap.test_password=n),placeholder:"LDAP Test User Password"},{default:t(()=>[r(" > ")]),_:1},8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("common.action")},{default:t(()=>[e(b,{type:"primary",onClick:a[25]||(a[25]=n=>v(M)("ldap",l.value))},{default:t(()=>[r(d(s.$t("setting.ldap.test")),1)]),_:1})]),_:1},8,["label"]),e(A,{message:"Warning",type:"warning","show-icon":""},{icon:t(()=>[e(v(V))]),description:t(()=>[c("div",{innerHTML:s.$t("setting.ldap.alert")},null,8,be)]),_:1})]),_:1},16)]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(w,{span:10},{default:t(()=>[e($,{orientation:"left"},{default:t(()=>[r(d(s.$t("setting.adv")),1)]),_:1}),e(y,C(O(v(f))),{default:t(()=>[e(o,{label:s.$t("setting.adv.query.limit")},{default:t(()=>[e(q,{value:l.value.other.limit,"onUpdate:value":a[26]||(a[26]=n=>l.value.other.limit=n),min:1},null,8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.env")},{default:t(()=>[(H(!0),I(N,null,oe(l.value.other.idc,n=>(H(),ue(Z,{key:n,color:"#B38D57",closable:"",onClose:ye=>Q(n)},{default:t(()=>[r(d(n),1)]),_:2},1032,["onClose"]))),128)),$e,he,e(_,null,{default:t(()=>[e(g,{value:l.value.other.force,"onUpdate:value":a[27]||(a[27]=n=>l.value.other.force=n),placeholder:s.$t("setting.adv.env.tips")},null,8,["value","placeholder"]),e(b,{onClick:G},{default:t(()=>[r(d(s.$t("setting.adv.env.add")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.query.open")},{default:t(()=>[e(k,{checked:l.value.other.query,"onUpdate:checked":a[28]||(a[28]=n=>l.value.other.query=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.query.register")},{default:t(()=>[e(k,{checked:l.value.other.register,"onUpdate:checked":a[29]||(a[29]=n=>l.value.other.register=n)},null,8,["checked"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.query.export")},{default:t(()=>[e(K,{value:l.value.other.export,"onUpdate:value":a[30]||(a[30]=n=>l.value.other.export=n),name:"radioGroup"},{default:t(()=>[e(L,{value:!1},{default:t(()=>[r(d(s.$t("common.no")),1)]),_:1}),e(L,{value:!0},{default:t(()=>[r(d(s.$t("common.yes")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.query.expire")},{default:t(()=>[e(q,{value:l.value.other.ex_query_time,"onUpdate:value":a[31]||(a[31]=n=>l.value.other.ex_query_time=n),min:1},null,8,["value"]),r(" "+d(s.$t("setting.adv.query.mins")),1)]),_:1},8,["label"]),e(o,{label:s.$t("setting.adv.domain")},{default:t(()=>[e(g,{value:l.value.other.domain,"onUpdate:value":a[32]||(a[32]=n=>l.value.other.domain=n)},null,8,["value"])]),_:1},8,["label"])]),_:1},16)]),_:1}),e(w,{span:11,offset:"1"},{default:t(()=>[e($,{orientation:"left"},{default:t(()=>[r(d(s.$t("setting.data.clear")),1)]),_:1}),e(y,C(O(v(f))),{default:t(()=>[e(o,{label:s.$t("setting.data.clear.order")},{default:t(()=>[e(_,null,{default:t(()=>[e(j,{value:l.value.other.overdue,"onUpdate:value":a[33]||(a[33]=n=>l.value.other.overdue=n),"show-time":"",format:"YYYY/MM/DD HH:mm",ranges:v(P)},null,8,["value","ranges"]),e(z,{title:s.$t("setting.data.clear.tips"),onConfirm:W},{default:t(()=>[e(b,null,{default:t(()=>[r(d(s.$t("common.delete")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["label"]),e(o,{label:s.$t("setting.data.clear.query")},{default:t(()=>[e(_,null,{default:t(()=>[e(j,{value:l.value.other.query_expire,"onUpdate:value":a[34]||(a[34]=n=>l.value.other.query_expire=n),"show-time":"",format:"YYYY/MM/DD HH:mm",ranges:v(P)},null,8,["value","ranges"]),e(z,{title:s.$t("setting.data.clear.tips"),onConfirm:F},{default:t(()=>[e(b,null,{default:t(()=>[r(d(s.$t("common.delete")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["label"]),e(A,{message:"Warning",type:"warning","show-icon":""},{icon:t(()=>[e(v(V))]),description:t(()=>[c("div",{innerHTML:s.$t("setting.data.clear.alert")},null,8,ke)]),_:1})]),_:1},16),ce,e(b,{type:"primary",block:"",onClick:a[35]||(a[35]=n=>v(fe)(l.value))},{default:t(()=>[r(d(s.$t("common.save")),1)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}}),Oe=re(_e,[["__file","F:/inf/Yearning/gemini-next/src/views/manager/setting/setting.vue"]]);export{Oe as default};
